package com.kira.malware.tests;

import android.content.ContentValues;
import android.content.Context;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;

import androidx.annotation.Nullable;

/**
 * Dummy SQLite database for testing SQLite content provider methods.
 */
public class TestDB extends SQLiteOpenHelper {

    public static final int DB_VERSION = 1;
    public static final String DB_NAME = "test", TABLE_NAME = "tests", COL_ID = "id", COL_NAME = "name", COL_DESCRIPTION = "description";

    public TestDB(@Nullable Context context) {
        super(context, DB_NAME, null, DB_VERSION);
    }

    @Override
    public void onCreate(SQLiteDatabase sqLiteDatabase) {
        sqLiteDatabase.execSQL(String.format("CREATE TABLE %s (%s INTEGER PRIMARY KEY AUTOINCREMENT, %s TEXT, %s TEXT)", TABLE_NAME, COL_ID, COL_NAME, COL_DESCRIPTION));

        ContentValues row = new ContentValues();
        row.put(COL_NAME, "Cicada");
        row.put(COL_DESCRIPTION, "3301");

        sqLiteDatabase.insert(TABLE_NAME, null, row);
    }

    @Override
    public void onUpgrade(SQLiteDatabase sqLiteDatabase, int i, int i1) {
        sqLiteDatabase.execSQL(String.format("DROP TABLE IF EXISTS %s", TABLE_NAME));
        this.onCreate(sqLiteDatabase);
    }

    @Override
    public synchronized void close() {
        super.close();
    }

}