package com.kira.malware.controllers;

import android.graphics.Color;
import android.text.Spannable;
import android.text.SpannableStringBuilder;
import android.text.style.BackgroundColorSpan;
import android.text.style.ForegroundColorSpan;

import androidx.annotation.NonNull;

import java.text.SimpleDateFormat;
import java.util.Date;
import java.util.Locale;

public class FormatController {

    private static final String TEXT_FORMAT = " %s  %s", TIME_FORMAT = "HH:mm:ss";
    private static final int LENGTH = 10, MODE = Spannable.SPAN_EXCLUSIVE_EXCLUSIVE;

    public enum Type {
        SUCCESS, ERROR, EXCEPTION, INFO
    }

    public static SpannableStringBuilder formatMessage(@NonNull String message, @NonNull Type type) {
        SpannableStringBuilder spannable = new SpannableStringBuilder(String.format(TEXT_FORMAT, new SimpleDateFormat(TIME_FORMAT, Locale.getDefault()).format(new Date()), message));
        BackgroundColorSpan background = null;
        switch (type) {
            case SUCCESS:
                background = new BackgroundColorSpan(Color.rgb(0, 128, 43));
                break;
            case ERROR:
                background = new BackgroundColorSpan(Color.rgb(236, 88, 0));
                break;
            case EXCEPTION:
                background = new BackgroundColorSpan(Color.rgb(179, 0, 0));
                break;
            case INFO:
                background = new BackgroundColorSpan(Color.rgb(0, 71, 171));
                break;
        }
        if (background != null) {
            spannable.setSpan(background, 0, LENGTH, MODE);
        }
        spannable.setSpan(new ForegroundColorSpan(Color.WHITE), 0, LENGTH, MODE);
        return spannable;
    }

}