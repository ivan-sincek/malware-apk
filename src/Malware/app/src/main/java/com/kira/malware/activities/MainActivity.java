package com.kira.malware.activities;

import android.Manifest;
import android.os.Bundle;

import androidx.annotation.Nullable;
import androidx.appcompat.app.AppCompatActivity;
import androidx.core.app.ActivityCompat;
import androidx.viewpager2.widget.ViewPager2;

import com.google.android.material.tabs.TabLayoutMediator;

import com.kira.malware.controllers.FileController;
import com.kira.malware.controllers.TabController;
import com.kira.malware.R;
import com.kira.malware.tests.TestDB;

import java.io.File;

public class MainActivity extends AppCompatActivity {

    private TestDB test;

    /**
     * Additional permissions may be required for specific exploits; add them here.
     */
    @Override
    protected void onCreate(@Nullable Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        FileController.edit(this.getFilesDir() + File.separator + "somefile.txt", "This is a dummy file for testing file content provider methods.");
        this.test = new TestDB(this); // NOTE: Create a dummy SQLite database for testing SQLite content provider methods.

        TabController tabController = new TabController(this);
        ViewPager2 viewPager = findViewById(R.id.view_pager_fragment);
        viewPager.setAdapter(tabController);
        new TabLayoutMediator(findViewById(R.id.tab_layout_tabs), viewPager, (tab, position) -> {
            tab.setText(tabController.getTitle(position));
        }).attach();

        ActivityCompat.requestPermissions(MainActivity.this, new String[]{
                Manifest.permission.INTERNET,
                Manifest.permission.READ_EXTERNAL_STORAGE,
                Manifest.permission.WRITE_EXTERNAL_STORAGE,
                Manifest.permission.SYSTEM_ALERT_WINDOW,
                "android.permission.POST_NOTIFICATIONS"
        }, 1);
    }

}